# Phase 1: 基盤セットアップ・環境構築用ブランチ作成作業

## 要件定義

### 目的
- GitHubブランチとドラフトプルリクエストを使った開発フローの実践
- Phase 1の実装タスクを整理された環境で実施
- マイルストーンのPhase 1完了を目指す

### 実施したい作業内容
1. **GitHubでのブランチ作成**
   - `feature/phase1-setup`ブランチの作成
   - mainブランチからの分岐

2. **ドラフトプルリクエストの作成**
   - Phase 1の実装内容を説明に記載
   - マイルストーンのPhase 1項目をコピペ+説明追加
   - 作業進捗の可視化

3. **ローカル環境での同期**
   - GitHubブランチとローカルブランチの同期
   - 適切なpull/fetch/checkoutの実行

4. **作業計画書をきっかけとしたプルリク開始**
   - この計画書をコミットしてプルリクエストを作成
   - 実装前の計画段階での相談・レビュー体制構築

### 対象となるPhase 1項目
- [ ] メインプラグインファイル（localize-debug-log.php）の骨格作成
- [ ] .htaccess設置によるセキュリティ基盤構築

### Git操作の学習目標
- ブランチ作成・切り替えの理解
- リモート・ローカル同期の理解
- プルリクエスト作成・管理の理解
- ドラフト機能の活用方法習得

---

## チェックボックス付き実装計画書

**実装計画立案ルール**

- 詳細なステップバイステップの計画書
- とにかく小さい単位
- 明確な開始と終了がある
- １つの関心事に集中

## 計画書

### 🚨 重要な前提知識：Gitの基本的な仕組み

**ファイルの3つの状態**
1. **作業ディレクトリ**: ローカルでファイルを編集している状態（まだGitに記録されていない）
2. **ステージングエリア**: `git add` でコミット準備完了の状態
3. **コミット**: `git commit` でGitの履歴に正式記録された状態

**📌 今回の作業計画書について**
- Step 1〜3: 作業計画書は「作業ディレクトリ」に保存されているだけ（Git管理外）
- Step 4: 作業計画書を `git add` → `git commit` でGitに記録
- **安心ポイント**: 作業ディレクトリのファイルは、手動で削除しない限り消えません！

### Step 1: GitHubでのブランチ作成
**何をする**: GitHubのWebページで新しいブランチを作成
**なぜ必要**: ローカルでブランチを作る前に、リモート（GitHub）側にブランチを用意
- [x] GitHubのWebページでリポジトリにアクセス
  > **手順**: ブラウザでGitHubリポジトリを開く
  > **確認**: リポジトリ名とmainブランチが表示されていることを確認
- [ ] 「main」ブランチから「feature/phase1-setup」ブランチを作成
  > **手順（方法1 - おすすめ）**:
  > 1. ファイル一覧上部の「main」ボタン（ブランチ切り替えボタン）をクリック
  > 2. テキストボックスに「feature/phase1-setup」と入力
  > 3. 「Create branch: feature/phase1-setup from main」をクリック
  >
  > **手順（方法2）**:
  > 1. 「Code」タブで🌿ブランチアイコンをクリック
  > 2. 「New branch」ボタンをクリック
  > 3. ブランチ名に「feature/phase1-setup」を入力して作成
  >
  > **結果**: 新しいブランチがmainブランチのコピーとして作成される
- [ ] ブランチ作成の確認（GitHubページで表示確認）
  > **確認方法**: ページが自動的にfeature/phase1-setupブランチに切り替わることを確認
  > **安心ポイント**: この時点ではまだローカルには何も影響なし

### Step 2: ローカル環境でのGit操作準備
**何をする**: 現在のローカル状況を確認し、安全にブランチ作業を開始できる状態にする
**なぜ必要**: ブランチ切り替え前に、現在の状況を把握して作業の衝突を防ぐ

- [x] 現在のブランチ状況確認
  ```bash
  git status
  git branch -a
  ```
  > **実行結果確認済み**:
  > - `git status`: mainブランチ、作業計画書が未追跡ファイルとして検出 ✅
  > - `git branch -a`: main、remotes/origin/mainのみ表示 ✅
  > **状況**: 想定通り！GitHubのfeature/phase1-setupブランチはまだローカル未認識

- [x] ローカルのmainブランチが最新か確認
  ```bash
  git checkout main
  git pull origin main
  ```
  > **実行結果**:
  > - 既にmainブランチにいて、「up to date with origin/main」と確認済み ✅
  > - pull は不要（既に最新）
  > **スキップ理由**: 既に最新状態なので次のステップに進む

- [x] リモートブランチ情報を取得
  ```bash
  git fetch origin
  ```
  > **実行結果確認済み**:
  > - `* [new branch] feature/phase1-setup -> origin/feature/phase1-setup` ✅
  > - GitHubで作成したブランチがローカルで認識されました！
  > **確認済み**: `git branch -r` で「origin/feature/phase1-setup」が表示 ✅

### Step 3: ローカルでのブランチ作成・切り替え
**何をする**: GitHubで作成したブランチをローカルでも使えるようにして、切り替える
**なぜ必要**: ローカルとリモートのブランチを同期させて、安全に作業できる環境を作る

- [ ] リモートのfeature/phase1-setupブランチを確認
  ```bash
  git branch -r
  ```
  > **期待される表示**: `origin/feature/phase1-setup` が一覧に表示される
  > **意味**: GitHubのブランチがローカルで認識されている証拠

- [x] ローカルに同名ブランチを作成してチェックアウト
  ```bash
  git checkout -b feature/phase1-setup origin/feature/phase1-setup
  ```
  > **実行結果確認済み**:
  > - `Switched to a new branch 'feature/phase1-setup'` ✅
  > - ローカルブランチ作成＆切り替え成功！
  > - リモートブランチとの連携も自動設定済み

- [x] ブランチ切り替え成功の確認
  ```bash
  git branch
  git status
  ```
  > **実行結果確認済み**:
  > - `* feature/phase1-setup` ✅（現在のブランチ）
  > - `On branch feature/phase1-setup` ✅
  > - 作業計画書が再び検出される ✅
  > **嬉しい効果**: 作業計画書の内容は全く失われていない！

### Step 4: 作業計画書のコミット・プッシュ
**何をする**: この作業計画書をGitの正式な履歴として記録し、GitHubに送信
**なぜここで**: プルリクエスト作成のきっかけにするため（差分として表示される）

- [ ] この計画書ファイルの変更をステージング
  ```bash
  git add _doc/branch-docs/plan/2025-08-05_フェーズ１用ブランチ作成.md
  ```
  > **何をしている**: 作業計画書を「コミット準備完了」状態にする
  > **確認方法**: `git status` で「Changes to be committed」に表示される
  > **安心ポイント**: まだコミットしていないので、間違えても `git reset` で元に戻せる

- [ ] コミット作成
  ```bash
  git commit -m "feat: Phase 1実装用ブランチ作業計画書を作成

  - GitHubブランチとローカル同期の手順を整理
  - ドラフトプルリクエスト作成フローを計画
  - Phase 1実装項目の明確化
  "
  ```
  > **何が起こる**: 作業計画書がGitの履歴に正式記録される
  > **意味**: この時点で作業が「なかったこと」にはならない安全な状態
  > **確認方法**: `git log --oneline` で新しいコミットが表示される

- [ ] リモートブランチにプッシュ
  ```bash
  git push origin feature/phase1-setup
  ```
  > **何をしている**: ローカルのコミットをGitHubに送信
  > **結果**: GitHubのfeature/phase1-setupブランチに作業計画書が追加される
  > **確認方法**: GitHubのWebページで作業計画書が表示される
  > **重要**: これでプルリクエスト作成の準備が完了！

### Step 5: ドラフトプルリクエストの作成
- [ ] GitHubでプルリクエスト作成画面にアクセス
- [ ] base: main ← compare: feature/phase1-setup の設定確認
- [ ] プルリクエストタイトル設定
  ```
  [DRAFT] Phase 1: 基盤セットアップ・環境構築の実装
  ```
- [ ] プルリクエスト説明文の作成
  ```markdown
  ## 📋 Phase 1: 基盤セットアップ・環境構築

  ### 実装予定項目
  - [ ] メインプラグインファイル（localize-debug-log.php）の骨格作成
  - [ ] .htaccess設置によるセキュリティ基盤構築

  ### 背景
  マイルストーン進捗確認の結果、Phase 1の残り2項目の実装が最優先タスクと判明。
  GitHubブランチとドラフトプルリクエストを使った開発フローの実践も兼ねて実施。

  ### 技術的な実装内容
  1. **メインプラグインファイル（localize-debug-log.php）**
     - WordPressプラグインヘッダーの実装
     - 基本的なフック登録（plugins_loaded等）
     - logs/ディレクトリ自動生成機能
     - error_log()出力先変更機能の基盤

  2. **.htaccessファイル**
     - logs/.htaccess の自動設置
     - "Deny from all" によるセキュリティ設定
  ```
- [ ] 「Draft pull request」として作成
- [ ] プルリクエスト番号の確認・記録

### Step 6: 実装作業の準備確認
- [ ] ローカルブランチでの作業環境確認
- [ ] 技術仕様書・要件定義書の再確認
- [ ] 実装対象ファイルパスの確認
  ```
  localize-debug-log/localize-debug-log.php （新規作成）
  localize-debug-log/logs/.htaccess （新規作成）
  ```

### Step 7: 最終確認
- [ ] GitHubとローカルの同期状態確認
- [ ] プルリクエストの動作確認
- [ ] 次の実装ステップの明確化

---
## コミットコメント

{{実装チェックリストが完了後、ユーザーの明確な承認を得たあとでチャットに出力されたコミットコメントを記載}}
